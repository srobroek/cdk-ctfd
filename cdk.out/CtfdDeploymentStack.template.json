{
 "Resources": {
  "CtfdDeploymentctfdBucketBDC66E86": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdBucket/Resource"
   }
  },
  "CtfdDeploymentctfdBucketPolicy51D9C35C": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "CtfdDeploymentctfdBucketBDC66E86"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "CtfdDeploymentctfdBucketBDC66E86",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "CtfdDeploymentctfdBucketBDC66E86",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdBucket/Policy/Resource"
   }
  },
  "CtfdDeploymentctfdVpcBB887D80": {
   "Type": "AWS::EC2::VPC",
   "Properties": {
    "CidrBlock": "10.0.0.0/20",
    "EnableDnsHostnames": true,
    "EnableDnsSupport": true,
    "InstanceTenancy": "default",
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/Resource"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet1Subnet7CDDB791": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      0,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.0.0/24",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "ctfd-public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1/Subnet"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet1RouteTable1A087A54": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1/RouteTable"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet1RouteTableAssociation005645A9": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet1RouteTable1A087A54"
    },
    "SubnetId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet1Subnet7CDDB791"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1/RouteTableAssociation"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet1DefaultRouteD8EF3779": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "CtfdDeploymentctfdVpcIGW4F44D0DC"
    },
    "RouteTableId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet1RouteTable1A087A54"
    }
   },
   "DependsOn": [
    "CtfdDeploymentctfdVpcVPCGW08873E39"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1/DefaultRoute"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet1EIPF77CE697": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc",
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1/EIP"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet1NATGateway7A184281": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdVpcctfdpublicSubnet1EIPF77CE697",
      "AllocationId"
     ]
    },
    "SubnetId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet1Subnet7CDDB791"
    },
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1"
     }
    ]
   },
   "DependsOn": [
    "CtfdDeploymentctfdVpcctfdpublicSubnet1DefaultRouteD8EF3779",
    "CtfdDeploymentctfdVpcctfdpublicSubnet1RouteTableAssociation005645A9"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet1/NATGateway"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet2SubnetCEBD1164": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      1,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.1.0/24",
    "MapPublicIpOnLaunch": true,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "ctfd-public"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Public"
     },
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2/Subnet"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet2RouteTable517C11D6": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2/RouteTable"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet2RouteTableAssociation19847B34": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet2RouteTable517C11D6"
    },
    "SubnetId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet2SubnetCEBD1164"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2/RouteTableAssociation"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet2DefaultRouteD51DB635": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "GatewayId": {
     "Ref": "CtfdDeploymentctfdVpcIGW4F44D0DC"
    },
    "RouteTableId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet2RouteTable517C11D6"
    }
   },
   "DependsOn": [
    "CtfdDeploymentctfdVpcVPCGW08873E39"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2/DefaultRoute"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet2EIP394222A3": {
   "Type": "AWS::EC2::EIP",
   "Properties": {
    "Domain": "vpc",
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2/EIP"
   }
  },
  "CtfdDeploymentctfdVpcctfdpublicSubnet2NATGateway890DD54F": {
   "Type": "AWS::EC2::NatGateway",
   "Properties": {
    "AllocationId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdVpcctfdpublicSubnet2EIP394222A3",
      "AllocationId"
     ]
    },
    "SubnetId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet2SubnetCEBD1164"
    },
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2"
     }
    ]
   },
   "DependsOn": [
    "CtfdDeploymentctfdVpcctfdpublicSubnet2DefaultRouteD51DB635",
    "CtfdDeploymentctfdVpcctfdpublicSubnet2RouteTableAssociation19847B34"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-publicSubnet2/NATGateway"
   }
  },
  "CtfdDeploymentctfdVpcctfdprivateSubnet1Subnet2829D2DD": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      0,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.2.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "ctfd-private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet1/Subnet"
   }
  },
  "CtfdDeploymentctfdVpcctfdprivateSubnet1RouteTable48A3FE34": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet1"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet1/RouteTable"
   }
  },
  "CtfdDeploymentctfdVpcctfdprivateSubnet1RouteTableAssociation42A8BAF1": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet1RouteTable48A3FE34"
    },
    "SubnetId": {
     "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet1Subnet2829D2DD"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet1/RouteTableAssociation"
   }
  },
  "CtfdDeploymentctfdVpcctfdprivateSubnet1DefaultRouteDF9F8692": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet1NATGateway7A184281"
    },
    "RouteTableId": {
     "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet1RouteTable48A3FE34"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet1/DefaultRoute"
   }
  },
  "CtfdDeploymentctfdVpcctfdprivateSubnet2Subnet416557CF": {
   "Type": "AWS::EC2::Subnet",
   "Properties": {
    "AvailabilityZone": {
     "Fn::Select": [
      1,
      {
       "Fn::GetAZs": ""
      }
     ]
    },
    "CidrBlock": "10.0.3.0/24",
    "MapPublicIpOnLaunch": false,
    "Tags": [
     {
      "Key": "aws-cdk:subnet-name",
      "Value": "ctfd-private"
     },
     {
      "Key": "aws-cdk:subnet-type",
      "Value": "Private"
     },
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet2/Subnet"
   }
  },
  "CtfdDeploymentctfdVpcctfdprivateSubnet2RouteTableCB536B79": {
   "Type": "AWS::EC2::RouteTable",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet2"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet2/RouteTable"
   }
  },
  "CtfdDeploymentctfdVpcctfdprivateSubnet2RouteTableAssociation85E9D38A": {
   "Type": "AWS::EC2::SubnetRouteTableAssociation",
   "Properties": {
    "RouteTableId": {
     "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet2RouteTableCB536B79"
    },
    "SubnetId": {
     "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet2Subnet416557CF"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet2/RouteTableAssociation"
   }
  },
  "CtfdDeploymentctfdVpcctfdprivateSubnet2DefaultRoute707AF5C9": {
   "Type": "AWS::EC2::Route",
   "Properties": {
    "DestinationCidrBlock": "0.0.0.0/0",
    "NatGatewayId": {
     "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet2NATGateway890DD54F"
    },
    "RouteTableId": {
     "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet2RouteTableCB536B79"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/ctfd-privateSubnet2/DefaultRoute"
   }
  },
  "CtfdDeploymentctfdVpcIGW4F44D0DC": {
   "Type": "AWS::EC2::InternetGateway",
   "Properties": {
    "Tags": [
     {
      "Key": "Name",
      "Value": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/IGW"
   }
  },
  "CtfdDeploymentctfdVpcVPCGW08873E39": {
   "Type": "AWS::EC2::VPCGatewayAttachment",
   "Properties": {
    "InternetGatewayId": {
     "Ref": "CtfdDeploymentctfdVpcIGW4F44D0DC"
    },
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/VPCGW"
   }
  },
  "CtfdDeploymentctfdVpcs3Endpoint7D7B5A98": {
   "Type": "AWS::EC2::VPCEndpoint",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Effect": "Allow",
       "Principal": {
        "AWS": "*"
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "CtfdDeploymentctfdBucketBDC66E86",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "RouteTableIds": [
     {
      "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet1RouteTable48A3FE34"
     },
     {
      "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet2RouteTableCB536B79"
     },
     {
      "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet1RouteTable1A087A54"
     },
     {
      "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet2RouteTable517C11D6"
     }
    ],
    "ServiceName": {
     "Fn::Join": [
      "",
      [
       "com.amazonaws.",
       {
        "Ref": "AWS::Region"
       },
       ".s3"
      ]
     ]
    },
    "VpcEndpointType": "Gateway",
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdVpc/s3Endpoint/Resource"
   }
  },
  "CtfdDeploymentdbSecurityGroup1988C672": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Allow access to the database",
    "SecurityGroupEgress": [
     {
      "CidrIp": "255.255.255.255/32",
      "Description": "Disallow all traffic",
      "FromPort": 252,
      "IpProtocol": "icmp",
      "ToPort": 86
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/dbSecurityGroup/Resource"
   }
  },
  "CtfdDeploymentdbSecurityGroupfromCtfdDeploymentStackCtfdDeploymentctfdSecurityGroup3C0DB66D330644B1831A": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow MySQL Access",
    "FromPort": 3306,
    "GroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentdbSecurityGroup1988C672",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdSecurityGroup6EC89554",
      "GroupId"
     ]
    },
    "ToPort": 3306
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/dbSecurityGroup/from CtfdDeploymentStackCtfdDeploymentctfdSecurityGroup3C0DB66D:3306"
   }
  },
  "CtfdDeploymentdbClusterSubnets67957BC3": {
   "Type": "AWS::RDS::DBSubnetGroup",
   "Properties": {
    "DBSubnetGroupDescription": "Subnets for dbCluster database",
    "SubnetIds": [
     {
      "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet1Subnet2829D2DD"
     },
     {
      "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet2Subnet416557CF"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/dbCluster/Subnets/Default"
   }
  },
  "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "Description": {
     "Fn::Join": [
      "",
      [
       "Generated by the CDK for stack: ",
       {
        "Ref": "AWS::StackName"
       }
      ]
     ]
    },
    "GenerateSecretString": {
     "ExcludeCharacters": " %+~`#$&*()|[]{}:;<>?!'/@\"\\",
     "GenerateStringKey": "password",
     "PasswordLength": 30,
     "SecretStringTemplate": "{\"username\":\"ctfd\"}"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/dbCluster/Secret/Resource"
   }
  },
  "CtfdDeploymentdbClusterSecretAttachment839170AC": {
   "Type": "AWS::SecretsManager::SecretTargetAttachment",
   "Properties": {
    "SecretId": {
     "Ref": "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb"
    },
    "TargetId": {
     "Ref": "CtfdDeploymentdbCluster466C09EF"
    },
    "TargetType": "AWS::RDS::DBCluster"
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/dbCluster/Secret/Attachment/Resource"
   }
  },
  "CtfdDeploymentdbCluster466C09EF": {
   "Type": "AWS::RDS::DBCluster",
   "Properties": {
    "CopyTagsToSnapshot": true,
    "DBClusterParameterGroupName": "default.aurora-mysql8.0",
    "DBSubnetGroupName": {
     "Ref": "CtfdDeploymentdbClusterSubnets67957BC3"
    },
    "DatabaseName": "ctfd",
    "Engine": "aurora-mysql",
    "EngineVersion": "8.0.mysql_aurora.3.06.0",
    "MasterUserPassword": {
     "Fn::Join": [
      "",
      [
       "{{resolve:secretsmanager:",
       {
        "Ref": "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb"
       },
       ":SecretString:password::}}"
      ]
     ]
    },
    "MasterUsername": "ctfd",
    "Port": 3306,
    "ServerlessV2ScalingConfiguration": {
     "MaxCapacity": 4,
     "MinCapacity": 1
    },
    "VpcSecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "CtfdDeploymentdbSecurityGroup1988C672",
       "GroupId"
      ]
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/dbCluster/Resource"
   }
  },
  "CtfdDeploymentdbClusterwriter00245290": {
   "Type": "AWS::RDS::DBInstance",
   "Properties": {
    "DBClusterIdentifier": {
     "Ref": "CtfdDeploymentdbCluster466C09EF"
    },
    "DBInstanceClass": "db.serverless",
    "Engine": "aurora-mysql",
    "PromotionTier": 0,
    "PubliclyAccessible": false
   },
   "DependsOn": [
    "CtfdDeploymentctfdVpcctfdprivateSubnet1DefaultRouteDF9F8692",
    "CtfdDeploymentctfdVpcctfdprivateSubnet1RouteTableAssociation42A8BAF1",
    "CtfdDeploymentctfdVpcctfdprivateSubnet2DefaultRoute707AF5C9",
    "CtfdDeploymentctfdVpcctfdprivateSubnet2RouteTableAssociation85E9D38A"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/dbCluster/writer/Resource"
   }
  },
  "CtfdDeploymentdbClusterreader06C0725F": {
   "Type": "AWS::RDS::DBInstance",
   "Properties": {
    "DBClusterIdentifier": {
     "Ref": "CtfdDeploymentdbCluster466C09EF"
    },
    "DBInstanceClass": "db.serverless",
    "Engine": "aurora-mysql",
    "PromotionTier": 1,
    "PubliclyAccessible": false
   },
   "DependsOn": [
    "CtfdDeploymentctfdVpcctfdprivateSubnet1DefaultRouteDF9F8692",
    "CtfdDeploymentctfdVpcctfdprivateSubnet1RouteTableAssociation42A8BAF1",
    "CtfdDeploymentctfdVpcctfdprivateSubnet2DefaultRoute707AF5C9",
    "CtfdDeploymentctfdVpcctfdprivateSubnet2RouteTableAssociation85E9D38A"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/dbCluster/reader/Resource"
   }
  },
  "CtfdDeploymentredisSecurityGroup3DEC32D8": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Allow access to the redis cluster",
    "SecurityGroupEgress": [
     {
      "CidrIp": "255.255.255.255/32",
      "Description": "Disallow all traffic",
      "FromPort": 252,
      "IpProtocol": "icmp",
      "ToPort": 86
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/redisSecurityGroup/Resource"
   }
  },
  "CtfdDeploymentctfdServerlessCacheB70093CE": {
   "Type": "AWS::ElastiCache::ServerlessCache",
   "Properties": {
    "Engine": "redis",
    "SecurityGroupIds": [
     {
      "Fn::GetAtt": [
       "CtfdDeploymentredisSecurityGroup3DEC32D8",
       "GroupId"
      ]
     }
    ],
    "ServerlessCacheName": "ctfdServerlessCache",
    "SubnetIds": [
     {
      "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet1Subnet2829D2DD"
     },
     {
      "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet2Subnet416557CF"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdServerlessCache"
   }
  },
  "CtfdDeploymentdatabaseConnectionStringSecretDA819DD4": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "SecretString": {
     "Fn::Join": [
      "",
      [
       "mysql+pymysql://undefined:undefined@",
       {
        "Fn::GetAtt": [
         "CtfdDeploymentdbCluster466C09EF",
         "Endpoint.Address"
        ]
       },
       "/ctfd"
      ]
     ]
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/databaseConnectionStringSecret/Resource"
   }
  },
  "CtfdDeploymentredisConnectionStringSecretB104BBFD": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "SecretString": {
     "Fn::Join": [
      "",
      [
       "rediss://default:CtfdDeploymentStack/CtfdDeployment/ctfdServerlessCache [AWS::ElastiCache::ServerlessCache]@",
       {
        "Fn::GetAtt": [
         "CtfdDeploymentctfdServerlessCacheB70093CE",
         "Endpoint.Address"
        ]
       },
       ":",
       {
        "Fn::GetAtt": [
         "CtfdDeploymentctfdServerlessCacheB70093CE",
         "Endpoint.Port"
        ]
       }
      ]
     ]
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/redisConnectionStringSecret/Resource"
   }
  },
  "CtfdDeploymentctfdSecretKeySecret35A08A34": {
   "Type": "AWS::SecretsManager::Secret",
   "Properties": {
    "GenerateSecretString": {}
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdSecretKeySecret/Resource"
   }
  },
  "CtfdDeploymentctfdSecurityGroup6EC89554": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "CtfdDeploymentStack/CtfdDeployment/ctfdSecurityGroup",
    "SecurityGroupEgress": [
     {
      "CidrIp": "0.0.0.0/0",
      "Description": "Allow all outbound traffic by default",
      "IpProtocol": "-1"
     }
    ],
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdSecurityGroup/Resource"
   }
  },
  "CtfdDeploymentctfdSecurityGroupfromCtfdDeploymentStackCtfdDeploymentctfdServiceLBSecurityGroupF6D594F08080A2565732": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Load balancer to target",
    "FromPort": 8080,
    "GroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdSecurityGroup6EC89554",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdServiceLBSecurityGroup00CC53E1",
      "GroupId"
     ]
    },
    "ToPort": 8080
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdSecurityGroup/from CtfdDeploymentStackCtfdDeploymentctfdServiceLBSecurityGroupF6D594F0:8080"
   }
  },
  "CtfdDeploymentctfdServiceLB13374982": {
   "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
   "Properties": {
    "LoadBalancerAttributes": [
     {
      "Key": "deletion_protection.enabled",
      "Value": "false"
     }
    ],
    "Scheme": "internet-facing",
    "SecurityGroups": [
     {
      "Fn::GetAtt": [
       "CtfdDeploymentctfdServiceLBSecurityGroup00CC53E1",
       "GroupId"
      ]
     }
    ],
    "Subnets": [
     {
      "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet1Subnet7CDDB791"
     },
     {
      "Ref": "CtfdDeploymentctfdVpcctfdpublicSubnet2SubnetCEBD1164"
     }
    ],
    "Type": "application"
   },
   "DependsOn": [
    "CtfdDeploymentctfdVpcctfdpublicSubnet1DefaultRouteD8EF3779",
    "CtfdDeploymentctfdVpcctfdpublicSubnet1RouteTableAssociation005645A9",
    "CtfdDeploymentctfdVpcctfdpublicSubnet2DefaultRouteD51DB635",
    "CtfdDeploymentctfdVpcctfdpublicSubnet2RouteTableAssociation19847B34",
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/LB/Resource"
   }
  },
  "CtfdDeploymentctfdServiceLBSecurityGroup00CC53E1": {
   "Type": "AWS::EC2::SecurityGroup",
   "Properties": {
    "GroupDescription": "Automatically created Security Group for ELB CtfdDeploymentStackCtfdDeploymentctfdServiceLB75E77A97",
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/LB/SecurityGroup/Resource"
   }
  },
  "CtfdDeploymentctfdServiceLBSecurityGrouptoCtfdDeploymentStackCtfdDeploymentctfdSecurityGroup3C0DB66D80804A10E634": {
   "Type": "AWS::EC2::SecurityGroupEgress",
   "Properties": {
    "Description": "Load balancer to target",
    "DestinationSecurityGroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdSecurityGroup6EC89554",
      "GroupId"
     ]
    },
    "FromPort": 8080,
    "GroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdServiceLBSecurityGroup00CC53E1",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "ToPort": 8080
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/LB/SecurityGroup/to CtfdDeploymentStackCtfdDeploymentctfdSecurityGroup3C0DB66D:8080"
   }
  },
  "CtfdDeploymentctfdServiceLBSecurityGroupfromplfab65393807C2C750D": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow cloudfront prefix HTTP access",
    "FromPort": 80,
    "GroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdServiceLBSecurityGroup00CC53E1",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourcePrefixListId": "pl-fab65393",
    "ToPort": 80
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/LB/SecurityGroup/from pl-fab65393:80"
   }
  },
  "CtfdDeploymentctfdServiceLBPublicListener713C9316": {
   "Type": "AWS::ElasticLoadBalancingV2::Listener",
   "Properties": {
    "DefaultActions": [
     {
      "TargetGroupArn": {
       "Ref": "CtfdDeploymentctfdServiceLBPublicListenerECSGroup96CAFACF"
      },
      "Type": "forward"
     }
    ],
    "LoadBalancerArn": {
     "Ref": "CtfdDeploymentctfdServiceLB13374982"
    },
    "Port": 80,
    "Protocol": "HTTP"
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/LB/PublicListener/Resource"
   }
  },
  "CtfdDeploymentctfdServiceLBPublicListenerECSGroup96CAFACF": {
   "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
   "Properties": {
    "Matcher": {
     "HttpCode": "200,301,302"
    },
    "Port": 80,
    "Protocol": "HTTP",
    "TargetGroupAttributes": [
     {
      "Key": "stickiness.enabled",
      "Value": "true"
     },
     {
      "Key": "stickiness.type",
      "Value": "lb_cookie"
     },
     {
      "Key": "stickiness.lb_cookie.duration_seconds",
      "Value": "86400"
     }
    ],
    "TargetType": "ip",
    "VpcId": {
     "Ref": "CtfdDeploymentctfdVpcBB887D80"
    }
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/LB/PublicListener/ECSGroup/Resource"
   }
  },
  "CtfdDeploymentctfdServiceTaskDefTaskRoleFA3098A1": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/TaskDef/TaskRole/Resource"
   }
  },
  "CtfdDeploymentctfdServiceTaskDefTaskRoleDefaultPolicyC52B9F0A": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetObject*",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*",
        "s3:PutObject",
        "s3:PutObjectLegalHold",
        "s3:PutObjectRetention",
        "s3:PutObjectTagging",
        "s3:PutObjectVersionTagging",
        "s3:Abort*"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "CtfdDeploymentctfdBucketBDC66E86",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "CtfdDeploymentctfdBucketBDC66E86",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "rds-db:connect",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          "arn:",
          {
           "Ref": "AWS::Partition"
          },
          ":rds-db:",
          {
           "Ref": "AWS::Region"
          },
          ":",
          {
           "Ref": "AWS::AccountId"
          },
          ":dbuser:",
          {
           "Fn::GetAtt": [
            "CtfdDeploymentdbCluster466C09EF",
            "DBClusterResourceId"
           ]
          },
          "/undefined"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CtfdDeploymentctfdServiceTaskDefTaskRoleDefaultPolicyC52B9F0A",
    "Roles": [
     {
      "Ref": "CtfdDeploymentctfdServiceTaskDefTaskRoleFA3098A1"
     }
    ]
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/TaskDef/TaskRole/DefaultPolicy/Resource"
   }
  },
  "CtfdDeploymentctfdServiceTaskDef8DA8DDFA": {
   "Type": "AWS::ECS::TaskDefinition",
   "Properties": {
    "ContainerDefinitions": [
     {
      "Environment": [
       {
        "Name": "REVERSE_PROXY",
        "Value": "2,2,2,2,2"
       },
       {
        "Name": "WORKERS",
        "Value": "2"
       },
       {
        "Name": "UPLOAD_PROVIDER",
        "Value": "s3"
       },
       {
        "Name": "UPLOAD_FOLDER",
        "Value": "/var/uploads"
       }
      ],
      "Essential": true,
      "Image": "ctfd/ctfd:latest",
      "LogConfiguration": {
       "LogDriver": "awslogs",
       "Options": {
        "awslogs-group": {
         "Ref": "CtfdDeploymentctfdServiceTaskDefwebLogGroupADA26AFF"
        },
        "awslogs-stream-prefix": "ctfdService",
        "awslogs-region": {
         "Ref": "AWS::Region"
        }
       }
      },
      "Name": "web",
      "PortMappings": [
       {
        "ContainerPort": 8080,
        "Protocol": "tcp"
       }
      ],
      "Secrets": [
       {
        "Name": "DATABASE_URL",
        "ValueFrom": {
         "Ref": "CtfdDeploymentdatabaseConnectionStringSecretDA819DD4"
        }
       },
       {
        "Name": "REDIS_URL",
        "ValueFrom": {
         "Ref": "CtfdDeploymentredisConnectionStringSecretB104BBFD"
        }
       },
       {
        "Name": "SECRET_KEY",
        "ValueFrom": {
         "Ref": "CtfdDeploymentctfdSecretKeySecret35A08A34"
        }
       }
      ]
     }
    ],
    "Cpu": "1024",
    "ExecutionRoleArn": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdServiceTaskDefExecutionRoleE22C7310",
      "Arn"
     ]
    },
    "Family": "CtfdDeploymentStackCtfdDeploymentctfdServiceTaskDefB8381F4C",
    "Memory": "4096",
    "NetworkMode": "awsvpc",
    "RequiresCompatibilities": [
     "FARGATE"
    ],
    "TaskRoleArn": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdServiceTaskDefTaskRoleFA3098A1",
      "Arn"
     ]
    }
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/TaskDef/Resource"
   }
  },
  "CtfdDeploymentctfdServiceTaskDefwebLogGroupADA26AFF": {
   "Type": "AWS::Logs::LogGroup",
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/TaskDef/web/LogGroup/Resource"
   }
  },
  "CtfdDeploymentctfdServiceTaskDefExecutionRoleE22C7310": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "ecs-tasks.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/TaskDef/ExecutionRole/Resource"
   }
  },
  "CtfdDeploymentctfdServiceTaskDefExecutionRoleDefaultPolicy61F3EC1C": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CtfdDeploymentctfdServiceTaskDefwebLogGroupADA26AFF",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "secretsmanager:GetSecretValue",
        "secretsmanager:DescribeSecret"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "CtfdDeploymentdatabaseConnectionStringSecretDA819DD4"
       }
      },
      {
       "Action": [
        "secretsmanager:GetSecretValue",
        "secretsmanager:DescribeSecret"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "CtfdDeploymentredisConnectionStringSecretB104BBFD"
       }
      },
      {
       "Action": [
        "secretsmanager:GetSecretValue",
        "secretsmanager:DescribeSecret"
       ],
       "Effect": "Allow",
       "Resource": {
        "Ref": "CtfdDeploymentctfdSecretKeySecret35A08A34"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CtfdDeploymentctfdServiceTaskDefExecutionRoleDefaultPolicy61F3EC1C",
    "Roles": [
     {
      "Ref": "CtfdDeploymentctfdServiceTaskDefExecutionRoleE22C7310"
     }
    ]
   },
   "DependsOn": [
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/TaskDef/ExecutionRole/DefaultPolicy/Resource"
   }
  },
  "CtfdDeploymentctfdService2AE2C0AE": {
   "Type": "AWS::ECS::Service",
   "Properties": {
    "Cluster": {
     "Ref": "EcsDefaultClusterMnL3mNNYNctfdVpc180B9E85"
    },
    "DeploymentConfiguration": {
     "Alarms": {
      "AlarmNames": [],
      "Enable": false,
      "Rollback": false
     },
     "MaximumPercent": 200,
     "MinimumHealthyPercent": 50
    },
    "DesiredCount": 3,
    "EnableECSManagedTags": false,
    "HealthCheckGracePeriodSeconds": 60,
    "LaunchType": "FARGATE",
    "LoadBalancers": [
     {
      "ContainerName": "web",
      "ContainerPort": 8080,
      "TargetGroupArn": {
       "Ref": "CtfdDeploymentctfdServiceLBPublicListenerECSGroup96CAFACF"
      }
     }
    ],
    "NetworkConfiguration": {
     "AwsvpcConfiguration": {
      "AssignPublicIp": "DISABLED",
      "SecurityGroups": [
       {
        "Fn::GetAtt": [
         "CtfdDeploymentctfdSecurityGroup6EC89554",
         "GroupId"
        ]
       }
      ],
      "Subnets": [
       {
        "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet1Subnet2829D2DD"
       },
       {
        "Ref": "CtfdDeploymentctfdVpcctfdprivateSubnet2Subnet416557CF"
       }
      ]
     }
    },
    "TaskDefinition": {
     "Ref": "CtfdDeploymentctfdServiceTaskDef8DA8DDFA"
    }
   },
   "DependsOn": [
    "CtfdDeploymentctfdServiceLBPublicListenerECSGroup96CAFACF",
    "CtfdDeploymentctfdServiceLBPublicListener713C9316",
    "CtfdDeploymentctfdServiceTaskDefTaskRoleDefaultPolicyC52B9F0A",
    "CtfdDeploymentctfdServiceTaskDefTaskRoleFA3098A1",
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/Service/Service"
   }
  },
  "CtfdDeploymentctfdServiceTaskCountTarget6913A1C2": {
   "Type": "AWS::ApplicationAutoScaling::ScalableTarget",
   "Properties": {
    "MaxCapacity": 5,
    "MinCapacity": 3,
    "ResourceId": {
     "Fn::Join": [
      "",
      [
       "service/",
       {
        "Ref": "EcsDefaultClusterMnL3mNNYNctfdVpc180B9E85"
       },
       "/",
       {
        "Fn::GetAtt": [
         "CtfdDeploymentctfdService2AE2C0AE",
         "Name"
        ]
       }
      ]
     ]
    },
    "RoleARN": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":iam::",
       {
        "Ref": "AWS::AccountId"
       },
       ":role/aws-service-role/ecs.application-autoscaling.amazonaws.com/AWSServiceRoleForApplicationAutoScaling_ECSService"
      ]
     ]
    },
    "ScalableDimension": "ecs:service:DesiredCount",
    "ServiceNamespace": "ecs"
   },
   "DependsOn": [
    "CtfdDeploymentctfdServiceTaskDefTaskRoleDefaultPolicyC52B9F0A",
    "CtfdDeploymentctfdServiceTaskDefTaskRoleFA3098A1",
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/Service/TaskCount/Target/Resource"
   }
  },
  "CtfdDeploymentctfdServiceTaskCountTargetcpuUtilisation2DDADBE3": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "CtfdDeploymentStackCtfdDeploymentctfdServiceTaskCountTargetcpuUtilisation6B1BD7A2",
    "PolicyType": "TargetTrackingScaling",
    "ScalingTargetId": {
     "Ref": "CtfdDeploymentctfdServiceTaskCountTarget6913A1C2"
    },
    "TargetTrackingScalingPolicyConfiguration": {
     "PredefinedMetricSpecification": {
      "PredefinedMetricType": "ECSServiceAverageCPUUtilization"
     },
     "TargetValue": 70
    }
   },
   "DependsOn": [
    "CtfdDeploymentctfdServiceTaskDefTaskRoleDefaultPolicyC52B9F0A",
    "CtfdDeploymentctfdServiceTaskDefTaskRoleFA3098A1",
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/Service/TaskCount/Target/cpuUtilisation/Resource"
   }
  },
  "CtfdDeploymentctfdServiceTaskCountTargetmemoryUtilisation827F2820": {
   "Type": "AWS::ApplicationAutoScaling::ScalingPolicy",
   "Properties": {
    "PolicyName": "CtfdDeploymentStackCtfdDeploymentctfdServiceTaskCountTargetmemoryUtilisation6884B081",
    "PolicyType": "TargetTrackingScaling",
    "ScalingTargetId": {
     "Ref": "CtfdDeploymentctfdServiceTaskCountTarget6913A1C2"
    },
    "TargetTrackingScalingPolicyConfiguration": {
     "PredefinedMetricSpecification": {
      "PredefinedMetricType": "ECSServiceAverageMemoryUtilization"
     },
     "TargetValue": 70
    }
   },
   "DependsOn": [
    "CtfdDeploymentctfdServiceTaskDefTaskRoleDefaultPolicyC52B9F0A",
    "CtfdDeploymentctfdServiceTaskDefTaskRoleFA3098A1",
    "CtfdDeploymentdbClusterreader06C0725F",
    "CtfdDeploymentdbCluster466C09EF",
    "CtfdDeploymentdbClusterSecretAttachment839170AC",
    "CtfdDeploymentStackCtfdDeploymentdbClusterSecret7E8FA29E3fdaad7efa858a3daf9490cf0a702aeb",
    "CtfdDeploymentdbClusterSubnets67957BC3",
    "CtfdDeploymentdbClusterwriter00245290"
   ],
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/ctfdService/Service/TaskCount/Target/memoryUtilisation/Resource"
   }
  },
  "CtfdDeploymentdistributionLoggingBucket84E09C25": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "OwnershipControls": {
     "Rules": [
      {
       "ObjectOwnership": "ObjectWriter"
      }
     ]
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/distribution/LoggingBucket/Resource"
   }
  },
  "CtfdDeploymentdistribution5222908B": {
   "Type": "AWS::CloudFront::Distribution",
   "Properties": {
    "DistributionConfig": {
     "DefaultCacheBehavior": {
      "AllowedMethods": [
       "GET",
       "HEAD",
       "OPTIONS",
       "PUT",
       "PATCH",
       "POST",
       "DELETE"
      ],
      "CachePolicyId": "4135ea2d-6df8-44a3-9df3-4b5a84be39ad",
      "Compress": true,
      "OriginRequestPolicyId": "216adef6-5c7f-47e4-b989-5492eafa07d3",
      "TargetOriginId": "CtfdDeploymentStackCtfdDeploymentdistributionOrigin15CCEB851",
      "ViewerProtocolPolicy": "redirect-to-https"
     },
     "Enabled": true,
     "HttpVersion": "http2",
     "IPV6Enabled": true,
     "Logging": {
      "Bucket": {
       "Fn::GetAtt": [
        "CtfdDeploymentdistributionLoggingBucket84E09C25",
        "RegionalDomainName"
       ]
      }
     },
     "Origins": [
      {
       "CustomOriginConfig": {
        "OriginProtocolPolicy": "http-only",
        "OriginSSLProtocols": [
         "TLSv1.2"
        ]
       },
       "DomainName": {
        "Fn::GetAtt": [
         "CtfdDeploymentctfdServiceLB13374982",
         "DNSName"
        ]
       },
       "Id": "CtfdDeploymentStackCtfdDeploymentdistributionOrigin15CCEB851"
      }
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/distribution/Resource"
   }
  },
  "CtfdDeploymentredisSecurityGroupLookupfromCtfdDeploymentStackCtfdDeploymentctfdSecurityGroup3C0DB66D63797001B2EC": {
   "Type": "AWS::EC2::SecurityGroupIngress",
   "Properties": {
    "Description": "Allow Redis access",
    "FromPort": 6379,
    "GroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentredisSecurityGroup3DEC32D8",
      "GroupId"
     ]
    },
    "IpProtocol": "tcp",
    "SourceSecurityGroupId": {
     "Fn::GetAtt": [
      "CtfdDeploymentctfdSecurityGroup6EC89554",
      "GroupId"
     ]
    },
    "ToPort": 6379
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CtfdDeployment/redisSecurityGroupLookup/from CtfdDeploymentStackCtfdDeploymentctfdSecurityGroup3C0DB66D:6379"
   }
  },
  "EcsDefaultClusterMnL3mNNYNctfdVpc180B9E85": {
   "Type": "AWS::ECS::Cluster",
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/EcsDefaultClusterMnL3mNNYNctfdVpc/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/31T244aMQz9ln0PKdD+ALeukFYtAsTrypMxs1lCMoodEBrNv1eZzG0v6pPtk2PHx3HmcvZrKqdPcKeJyi8TozNZHRjURcCdXiv6KatlUBdksTrb1ktm54xWjwFOcS1QzWV1KlU8Oe1WYhcyo9UhZDYVGby9C4xHyAwO+IAtiJzSwNrZnhydzXYXzR/gZ2C8w0PsvL4B41B4axm9xZ6QOmmjBTOotytaFi1yKtXG5qXTlltqHx5QBa/58exdKJsu/wtsbeGR6Au+aeBa+JxktQaGDAhXJhCjF6nvvuB6OQY68gGVT+LWyy6xCbaWGKzCWlBDoStYKNDLKjURs5I5gi+QR/J7wpeTBNcCDRBrBeoNZcP2N/QGiVYREqjotQSOwya5KEujVfNeLw7yJZjYVv4bfBEfB/1NK+wqGgd51jC0LW5zWX2f3Wj8EI95mhhty+n80XlS1c91FMYlJVm1rR2BLms8a6u7XfuMOMugLfoR9klWO5zoHhSYuL+xyMqFOOfhvVq3Fhqustq7tPqNHf5T95OMK0hWL67oNXR+LWDQCYEdKTDaFrIabo9qm74+IskcPaiLtsUh5Q13fwBqoYwL+dk7y7Jaa2Kvs9BNaRzXtdgjueDTLP4GLkP64yN05WzeTK8W1uUo3+nHbT6Vs5mcPr2T1hMfLOsryn2y/wBV54IdnQQAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "CtfdDeploymentStack/CDKMetadata/Default"
   },
   "Condition": "CDKMetadataAvailable"
  }
 },
 "Outputs": {
  "CtfdDeploymentctfdServiceLoadBalancerDNS57840057": {
   "Value": {
    "Fn::GetAtt": [
     "CtfdDeploymentctfdServiceLB13374982",
     "DNSName"
    ]
   }
  },
  "CtfdDeploymentctfdServiceServiceURLBBC1E375": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "http://",
      {
       "Fn::GetAtt": [
        "CtfdDeploymentctfdServiceLB13374982",
        "DNSName"
       ]
      }
     ]
    ]
   }
  }
 },
 "Conditions": {
  "CDKMetadataAvailable": {
   "Fn::Or": [
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "af-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-northeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ap-southeast-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "ca-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "cn-northwest-1"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-north-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "eu-west-3"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "il-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-central-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "me-south-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "sa-east-1"
       ]
      }
     ]
    },
    {
     "Fn::Or": [
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-east-2"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-1"
       ]
      },
      {
       "Fn::Equals": [
        {
         "Ref": "AWS::Region"
        },
        "us-west-2"
       ]
      }
     ]
    }
   ]
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}